<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transporte Mart√≠n Celesia</title>
    <style>
        :root {
            --brand: #1e3a8a; /* Azul oscuro corporativo */
            --accent: #f59e0b; /* Naranja/Amarillo tipo escolar */
            --bg: #f1f5f9;
            --card: #ffffff;
            --text: #334155;
            --success: #16a34a;
            --danger: #ef4444;
        }

        body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            padding-bottom: 80px;
        }

        /* HEADER */
        .brand-header {
            background: linear-gradient(135deg, var(--brand), #1e40af);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .brand-header h1 { margin: 0; font-size: 1.5rem; letter-spacing: 1px; }
        .brand-tag { 
            background: var(--accent); color: #000; 
            font-size: 0.7rem; padding: 3px 8px; border-radius: 10px; 
            font-weight: bold; margin-top: 5px; display: inline-block;
        }

        /* TABS */
        .nav-tabs { display: flex; background: white; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid #cbd5e1; }
        .tab-btn {
            flex: 1; padding: 15px; border: none; background: transparent;
            font-weight: 700; color: #64748b; border-bottom: 4px solid transparent;
            transition: 0.3s; cursor: pointer;
        }
        .tab-btn.active { color: var(--brand); border-bottom-color: var(--brand); background: #eff6ff; }

        /* CONTENT */
        .container { padding: 15px; max-width: 600px; margin: 0 auto; }
        .tab-content { display: none; animation: fadeIn 0.4s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from {opacity:0; transform:translateY(5px);} to {opacity:1; transform:translateY(0);} }

        /* CARDS */
        .card {
            background: var(--card); border-radius: 12px; padding: 18px;
            margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
        }
        h2 { margin: 0 0 12px 0; font-size: 1.1rem; color: var(--brand); border-bottom: 1px dashed #cbd5e1; padding-bottom: 5px; }

        /* INPUTS */
        label { display: block; font-size: 0.85rem; color: #475569; margin-bottom: 5px; font-weight: 600; }
        select, input {
            width: 100%; padding: 12px; border: 1px solid #cbd5e1;
            border-radius: 8px; font-size: 1rem; background: #f8fafc; box-sizing: border-box; margin-bottom: 12px;
        }
        select:focus, input:focus { outline: none; border-color: var(--brand); background: white; }

        /* RESULT BOXES */
        .apoeta-box {
            background: #fffbeb; border: 2px solid var(--accent);
            border-radius: 12px; padding: 20px; text-align: center;
            margin-bottom: 20px;
        }
        .price-big { font-size: 2.2rem; font-weight: 800; color: #b45309; margin: 5px 0; }
        .price-label { font-size: 0.8rem; text-transform: uppercase; color: #92400e; font-weight: bold; }

        .profit-box {
            background: #1e293b; color: white; padding: 15px; border-radius: 10px;
        }
        .profit-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.9rem; }
        .profit-total { 
            font-size: 1.5rem; font-weight: bold; text-align: center; 
            margin-top: 10px; padding-top: 10px; border-top: 1px solid #334155; 
            color: var(--success);
        }

        .alert-info { font-size: 0.8rem; color: #64748b; background: #f1f5f9; padding: 8px; border-radius: 6px; margin-top: 5px; }

    </style>
</head>
<body>

<div class="brand-header">
    <h1>Transporte Mart√≠n Celesia</h1>
    <span class="brand-tag">LISTA PRECIOS NOV 2025</span>
</div>

<div class="nav-tabs">
    <button class="tab-btn active" onclick="setTab('lista')">1. Lista Oficial</button>
    <button class="tab-btn" onclick="setTab('costos')">2. Mis Costos Real</button>
</div>

<div class="container">

    <!-- TAB 1: PRECIOS DE LISTA (APOETA) -->
    <div id="lista" class="tab-content active">
        
        <div class="apoeta-box">
            <div class="price-label">Precio Sugerido (APOETA)</div>
            <div class="price-big" id="res_lista">$0</div>
            <div style="font-size:0.8rem; color:#b45309;">+ PEAJES (No incluidos)</div>
        </div>

        <div class="card">
            <h2>üöå Configuraci√≥n del Servicio</h2>
            
            <label>Tipo de Veh√≠culo</label>
            <select id="sel_vehiculo" onchange="actualizarLista()">
                <option value="camioneta">Camioneta</option>
                <option value="bus">Bus 45 Asientos</option>
            </select>

            <label>Categor√≠a</label>
            <select id="sel_categoria" onchange="cargarServicios()">
                <option value="caba">Servicios Diurnos CABA / Especiales</option>
                <option value="zona">Media/Larga Distancia (Por Zonas)</option>
            </select>

            <label>Destino / Servicio</label>
            <select id="sel_servicio" onchange="actualizarLista()">
                <!-- Se llena con JS -->
            </select>

            <!-- Opci√≥n solo para Zonas -->
            <div id="div_jornada" style="display:none; background:#fff7ed; padding:10px; border-radius:8px;">
                <label style="margin-bottom:0; color:#c2410c;">
                    <input type="checkbox" id="chk_media_dia" style="width:auto; margin-right:10px;" onchange="actualizarLista()">
                    Es Medio D√≠a (70% del valor)
                </label>
            </div>
            
            <div class="alert-info">
                ‚ÑπÔ∏è Nota: Los precios incluyen una estimaci√≥n del 10% de aumento sobre la √∫ltima cuota.
            </div>
        </div>

        <button onclick="copiarPrecio()" style="width:100%; background:var(--brand); color:white; padding:15px; border:none; border-radius:10px; font-weight:bold; font-size:1rem;">
            USAR ESTE PRECIO PARA ANALIZAR ‚¨áÔ∏è
        </button>
    </div>

    <!-- TAB 2: AN√ÅLISIS DE COSTOS -->
    <div id="costos" class="tab-content">
        
        <div class="profit-box">
            <div class="profit-row">
                <span>Precio Cobrado (Lista):</span>
                <span id="ana_precio" style="color:#fbbf24; font-weight:bold;">$0</span>
            </div>
            <div class="profit-row">
                <span> - Costo Operativo Real:</span>
                <span id="ana_costo">$0</span>
            </div>
            <div class="profit-total" id="ana_ganancia">
                $0
            </div>
            <div style="text-align:center; font-size:0.8rem; color:#94a3b8;">GANANCIA FINAL BOLSILLO</div>
        </div>

        <br>

        <div class="card">
            <h2>‚õΩ Costos del Viaje</h2>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                <div>
                    <label>KM Totales</label>
                    <input type="number" id="km" placeholder="0" oninput="calcularRentabilidad()">
                </div>
                <div>
                    <label>Consumo (km/l)</label>
                    <input type="number" id="consumo" value="8" oninput="calcularRentabilidad()">
                </div>
            </div>
            <label>Precio Diesel ($)</label>
            <input type="number" id="precio_diesel" placeholder="$" oninput="calcularRentabilidad()">
        </div>

        <div class="card">
            <h2>üë®‚Äç‚úàÔ∏è Chofer y Fijos</h2>
            <div style="background:#f1f5f9; padding:10px; border-radius:8px; margin-bottom:10px;">
                <label>Pago Chofer (Este viaje)</label>
                <input type="number" id="chofer_viaje" placeholder="$ Opcional" oninput="calcularRentabilidad()" style="margin-bottom:0;">
            </div>
            
            <label>Monotributo + Seguro + Amort. (Valor Hora)</label>
            <input type="number" id="costo_hora_fijo" value="5000" placeholder="Ej: 5000" oninput="calcularRentabilidad()">
            
            <label>Duraci√≥n del Trabajo (Horas)</label>
            <input type="number" id="horas_trabajo" placeholder="Hs" oninput="calcularRentabilidad()">
        </div>

        <div class="card">
            <h2>üöß Extras</h2>
            <label>Peajes / Parking ($)</label>
            <input type="number" id="gastos_extra" value="0" oninput="calcularRentabilidad()">
        </div>

    </div>

</div>

<script>
    // --- DATOS DE LA LISTA (IMAGEN) ---
    const DB = {
        caba: [
            { id: 'cumple', nombre: 'Cumplea√±os (Solo Ida)', cam: 112000, bus: 151000 },
            { id: 'deporte_medio', nombre: 'C. Deportes (1/2 D√≠a)', cam: 114000, bus: 154500 },
            { id: 'pileta', nombre: 'Piletas', cam: 105000, bus: 136500 },
            { id: 'excu_medio', nombre: 'Excursi√≥n (Medio D√≠a)', cam: 135500, bus: 184000 },
            { id: 'excu_todo', nombre: 'Excursi√≥n (Todo el D√≠a)', cam: 222000, bus: 305000 },
            { id: 'city', nombre: 'City Tour 1/2 D√≠a', cam: 152000, bus: 209000 },
            { id: 'deporte_lejos', nombre: 'C. Deportes (hasta 50km)', cam: 214000, bus: 290000 },
            // Especiales lista derecha
            { id: 'serenisima', nombre: 'La Seren√≠sima (1/2 D√≠a)', cam: 0, bus: 420000 },
            { id: 'temaiken', nombre: 'Temaik√©n', cam: 0, bus: 558000 },
            { id: 'ceamse', nombre: 'Ceamse / Bs As', cam: 0, bus: 406000 },
            { id: 'bimbo', nombre: 'Bimbo - Pilar', cam: 0, bus: 630000 }
        ],
        zona: [
            { id: 't1', nombre: 'T1 (25km): Vte Lopez, Lanus, San Isidro...', cam: 220000, bus: 310000 },
            { id: 't2', nombre: 'T2 (40km): Tigre, Ezeiza, Merlo, Quilmes...', cam: 290000, bus: 410000 },
            { id: 't3', nombre: 'T3 (60km): Pilar, Escobar, La Plata, Gral Rod...', cam: 400000, bus: 540000 },
            { id: 't4', nombre: 'T4 (80km): Luj√°n, Ca√±uelas, Campana...', cam: 500000, bus: 680000 },
            { id: 't5', nombre: 'T5 (100km): Z√°rate, Lobos, Mercedes...', cam: 605000, bus: 800000 }
        ]
    };

    let PRECIO_LISTA_ACTUAL = 0;
    const money = new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS', minimumFractionDigits: 0 });

    // --- L√ìGICA DE UI ---
    function setTab(tab) {
        document.querySelectorAll('.tab-content').forEach(e => e.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(e => e.classList.remove('active'));
        document.getElementById(tab).classList.add('active');
        if(tab === 'lista') document.querySelectorAll('.tab-btn')[0].classList.add('active');
        else document.querySelectorAll('.tab-btn')[1].classList.add('active');
    }

    function cargarServicios() {
        const cat = document.getElementById('sel_categoria').value;
        const sel = document.getElementById('sel_servicio');
        const divJornada = document.getElementById('div_jornada');
        
        sel.innerHTML = '';
        
        // Mostrar checkbox medio d√≠a solo en Zonas
        divJornada.style.display = (cat === 'zona') ? 'block' : 'none';

        DB[cat].forEach(item => {
            let opt = document.createElement('option');
            opt.value = JSON.stringify(item); // Guardamos todo el objeto en el value
            opt.text = item.nombre;
            sel.add(opt);
        });
        actualizarLista();
    }

    function actualizarLista() {
        const vehiculo = document.getElementById('sel_vehiculo').value; // 'cam' o 'bus'
        const item = JSON.parse(document.getElementById('sel_servicio').value);
        const esMediaDia = document.getElementById('chk_media_dia').checked;
        const categoria = document.getElementById('sel_categoria').value;

        // Propiedad a buscar: 'cam' o 'bus'
        let precioBase = (vehiculo === 'camioneta') ? item.cam : item.bus;

        // Si el precio es 0 (ej: temaiken en camioneta no est√° listado), avisar
        if (precioBase === 0) {
            document.getElementById('res_lista').innerText = "Consultar";
            PRECIO_LISTA_ACTUAL = 0;
            return;
        }

        // L√≥gica Medio D√≠a (Solo aplica a Zonas seg√∫n la imagen: "MEDIO D√çA: 70% de Todo el d√≠a")
        if (categoria === 'zona' && esMediaDia) {
            precioBase = precioBase * 0.70;
        }

        PRECIO_LISTA_ACTUAL = precioBase;
        document.getElementById('res_lista').innerText = money.format(PRECIO_LISTA_ACTUAL);
    }

    // --- PASAR PRECIO A CALCULADORA ---
    function copiarPrecio() {
        setTab('costos');
        calcularRentabilidad();
    }

    // --- L√ìGICA DE RENTABILIDAD ---
    function calcularRentabilidad() {
        // Ingresos
        document.getElementById('ana_precio').innerText = money.format(PRECIO_LISTA_ACTUAL);

        // Costos
        let km = parseFloat(document.getElementById('km').value) || 0;
        let consumo = parseFloat(document.getElementById('consumo').value) || 1;
        let diesel = parseFloat(document.getElementById('precio_diesel').value) || 0;
        
        let costoCombustible = (km / consumo) * diesel;

        let chofer = parseFloat(document.getElementById('chofer_viaje').value) || 0;
        
        let valorHora = parseFloat(document.getElementById('costo_hora_fijo').value) || 0;
        let horas = parseFloat(document.getElementById('horas_trabajo').value) || 0;
        let costoFijoTiempo = valorHora * horas; // Amortizacion + Monotributo prorrateado

        let extras = parseFloat(document.getElementById('gastos_extra').value) || 0;

        let costoTotal = costoCombustible + chofer + costoFijoTiempo + extras;
        let ganancia = PRECIO_LISTA_ACTUAL - costoTotal;

        // Render
        document.getElementById('ana_costo').innerText = money.format(costoTotal);
        
        const elGanancia = document.getElementById('ana_ganancia');
        elGanancia.innerText = money.format(ganancia);
        
        if(ganancia > 0) {
            elGanancia.style.color = "#16a34a"; // Verde
        } else {
            elGanancia.style.color = "#ef4444"; // Rojo
        }
    }

    // Inicializar
    cargarServicios();

</script>

</body>
</html>
